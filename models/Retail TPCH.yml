unique_name: Retail TPCH
object_type: model
label: Retail TPCH
description: Based on Databricks Retail TPCH sample dataset
include_default_drillthrough: true
visible: true

relationships:

  - unique_name: supplier_Supplier_-_TPCH
    from:
      dataset: supplier
      join_columns:
        - s_suppkey
    to:
      dimension: Supplier - TPCH
      level: Supplier - TPCH Level

  - unique_name: customer_Customer_-_TPCH
    from:
      dataset: customer
      join_columns:
        - c_custkey
    to:
      dimension: Customer - TPCH
      level: Customer - TPCH Level

  - unique_name: lineitem_Parts_-_TPCH
    from:
      dataset: lineitem
      join_columns:
        - l_partkey
    to:
      dimension: Parts - TPCH
      level: Parts - TPCH Level

  - unique_name: lineitem_Orders__-_TPCH
    from:
      dataset: lineitem
      join_columns:
        - l_orderkey
    to:
      dimension: Orders  - TPCH
      level: Orders Dimension Level

  - unique_name: lineitem_Supplier_-_TPCH
    from:
      dataset: lineitem
      join_columns:
        - l_suppkey
    to:
      dimension: Supplier - TPCH
      level: Supplier - TPCH Level

  - unique_name: lineitem_Date_Dimension_ItemReceipt
    from:
      dataset: lineitem
      join_columns:
        - l_receiptdate
    to:
      dimension: Date Dimension
      level: Day - TPCH
    role_play: "Item Receipt {0}"

  - unique_name: lineitem_Date_Dimension_ItemShip
    from:
      dataset: lineitem
      join_columns:
        - l_shipdate
    to:
      dimension: Date Dimension
      level: Day - TPCH
    role_play: "Item Ship {0}"

  - unique_name: lineitem_Date_Dimension_ItemCommit
    from:
      dataset: lineitem
      join_columns:
        - l_commitdate
    to:
      dimension: Date Dimension
      level: Day - TPCH
    role_play: "Item Commit {0}"

  - unique_name: partsupp_Parts_-_TPCH
    from:
      dataset: partsupp
      join_columns:
        - ps_partkey
    to:
      dimension: Parts - TPCH
      level: Parts - TPCH Level

  - unique_name: partsupp_Supplier_-_TPCH
    from:
      dataset: partsupp
      join_columns:
        - ps_suppkey
    to:
      dimension: Supplier - TPCH
      level: Supplier - TPCH Level

  - unique_name: orders_Orders__-_TPCH
    from:
      dataset: orders
      join_columns:
        - o_orderkey
    to:
      dimension: Orders  - TPCH
      level: Orders Dimension Level

  - unique_name: orders_Customer_-_TPCH
    from:
      dataset: orders
      join_columns:
        - o_custkey
    to:
      dimension: Customer - TPCH
      level: Customer - TPCH Level

dimensions:
  - Return Flag
  - Shipping Mode

metrics:

  - unique_name: m_c_custkey_count
    folder: Customers

  - unique_name: m_l_discount_sum
    folder: Items

  - unique_name: m_l_quantity_sum
    folder: Items

  - unique_name: m_l_tax_sum
    folder: Items

  - unique_name: m_o_orderkey_count
    folder: Orders

  - unique_name: m_order_revenue
    folder: Orders

  - unique_name: m_ps_availqty_sum
    folder: Parts

  - unique_name: m_ps_supplycost_sum
    folder: Parts

  - unique_name: m_Revenue_sum
    folder: Items

  - unique_name: m_s_suppkey_count
    folder: Suppliers

  - unique_name: Order Revenue Previous Year
    folder: Orders

  - unique_name: YoY Order Revenue Change
    folder: Orders

  - unique_name: YTD Order Revenue
    folder: Orders
